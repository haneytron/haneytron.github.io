<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>But it Didn&#39;t Happen in DEV or QA! - David Haney</title>
  <meta name="description" content="Most of us have been there: you’ve written a fantastic application that performs perfectly in your Development and/or QA environments, but in Production something goes wrong. Your application spins out of control, utilizing 100% of your CPU. Maybe it simply stops responding as if it were deadlocked. Or maybe it simply crashes randomly. What now?
Logic tells you that you have a problem in the code somewhere that is only encountered in a Production-like environment… and if you could JUST get into the Production box, install Visual Studio (or at least the Remote Debugger), and debug the application, you’d be able to solve the problem.">
  <meta name="author" content="David Haney"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "David Haney",
    
    "url": "https:\/\/www.davidhaney.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/www.davidhaney.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/www.davidhaney.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/www.davidhaney.io\/but-it-didnt-happen-in-dev-or-qa\/",
          "name": "But it didn\u0027t happen in dev or qa!"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "David Haney"
  },
  "headline": "But it Didn\u0027t Happen in DEV or QA!",
  "description" : "Most of us have been there: you’ve written a fantastic application that performs perfectly in your Development and\/or QA environments, but in Production something goes wrong. Your application spins out of control, utilizing 100% of your CPU. Maybe it simply stops responding as if it were deadlocked. Or maybe it simply crashes randomly. What now?\nLogic tells you that you have a problem in the code somewhere that is only encountered in a Production-like environment… and if you could JUST get into the Production box, install Visual Studio (or at least the Remote Debugger), and debug the application, you’d be able to solve the problem.",
  "inLanguage" : "en",
  "wordCount":  1451 ,
  "datePublished" : "2012-12-02T17:22:20",
  "dateModified" : "2012-12-02T17:22:20",
  "image" : "https:\/\/www.davidhaney.io\/img\/me.jpg",
  "keywords" : [ "dotnet, debugging, performance, profiling, programming, windbg" ],
  "mainEntityOfPage" : "https:\/\/www.davidhaney.io\/but-it-didnt-happen-in-dev-or-qa\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/www.davidhaney.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/www.davidhaney.io\/img\/me.jpg",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="But it Didn&#39;t Happen in DEV or QA!" />
<meta property="og:description" content="Most of us have been there: you’ve written a fantastic application that performs perfectly in your Development and/or QA environments, but in Production something goes wrong. Your application spins out of control, utilizing 100% of your CPU. Maybe it simply stops responding as if it were deadlocked. Or maybe it simply crashes randomly. What now?
Logic tells you that you have a problem in the code somewhere that is only encountered in a Production-like environment… and if you could JUST get into the Production box, install Visual Studio (or at least the Remote Debugger), and debug the application, you’d be able to solve the problem.">
<meta property="og:image" content="https://www.davidhaney.io/img/me.jpg" />
<meta property="og:url" content="https://www.davidhaney.io/but-it-didnt-happen-in-dev-or-qa/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="David Haney" />

  <meta name="twitter:title" content="But it Didn&#39;t Happen in DEV or QA!" />
  <meta name="twitter:description" content="Most of us have been there: you’ve written a fantastic application that performs perfectly in your Development and/or QA environments, but in Production something goes wrong. Your application spins …">
  <meta name="twitter:image" content="https://www.davidhaney.io/img/me.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@haneytron" />
  <meta name="twitter:creator" content="@haneytron" />
  <link href='https://www.davidhaney.io/favicons/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.101.0" />
  <link rel="alternate" href="https://www.davidhaney.io/index.xml" type="application/rss+xml" title="David Haney"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://www.davidhaney.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://www.davidhaney.io/css/highlight.min.css" /><link rel="stylesheet" href="https://www.davidhaney.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PR2HVYP6QG"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'G-PR2HVYP6QG');
	</script>

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.davidhaney.io">David Haney</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="David Haney" href="https://www.davidhaney.io">
            <img class="avatar-img" src="https://www.davidhaney.io/img/me.jpg" alt="David Haney" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>But it Didn&#39;t Happen in DEV or QA!</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on Dec 2, 2012
  
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1451&nbsp;words
  
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>Most of us have been there: you’ve written a fantastic application that performs perfectly in your Development and/or QA environments, but in Production something goes wrong. Your application spins out of control, utilizing 100% of your CPU. Maybe it simply stops responding as if it were deadlocked. Or maybe it simply crashes randomly. What now?</p>
<p>Logic tells you that you have a problem in the code somewhere that is only encountered in a Production-like environment… and if you could JUST get into the Production box, install Visual Studio (or at least the Remote Debugger), and debug the application, you’d be able to solve the problem. However, you can’t (because it’s Production!), and you can’t replicate the problem in any other environment. Maybe it’s because of stale Development or QA environment data compared to live Production data. Maybe it’s something else. You have no idea where to look to find and fix the problem in your application. For lack of eloquence: you’re screwed.</p>
<p>Fortunately, there are both tools designed for this very scenario and ways to “reproduce” the problem to determine the cause. I’m going to show you how to debug Production problems in applications where you cannot attach to the process for live debugging, and there are either no logs or the logs tell you nothing useful.</p>
<p>Let’s create a simple application that is designed to take up 100% of our CPU:</p>
<pre><code>class Program
{
    static void Main(string[] args)
    {
        // Parallel to really max out the CPU
        Parallel.For(0, 100, (i) =&gt;
        {
            while (true)
            {
                // Loop forever and ever
            }
        });
    }
}
</code></pre>
<p>This code basically spawns 100 concurrent threads that loop for all of eternity. The reason that we do this using the TPL / Parallel library is that a single threaded application would only max out 1/N of our CPU, where N is the number of cores in the processor. Verifying our simple application, we can see that it does its job and maxes out our CPU:</p>

<link rel="stylesheet" href="https://www.davidhaney.io/css/hugo-easy-gallery.css" />
<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-1.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-1.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-1.png" itemprop="contentUrl"></a>
      <figcaption><h4>100% CPU Used</h4>
      </figcaption>
  </figure>
</div>

<p>Now, imagine that this application is a lot more complex and that this simple method is just one part of the entire solution. Perhaps you’ve built a really huge website or service and this method exists in just one little part of it. Pretend also that this method is not hit in your Development or QA environments during testing, and so your application appears to operate normally to you.</p>
<p>In fact, pretend that you’ve never seen this source code at all. All that you know is that you have an application in Production that spins out of control, and you don’t know where the problem is – or even where to begin looking.</p>
<p><strong>So, what do you do?</strong></p>
<p>The first thing we need to do is ensure that we have the tools we’ll need to debug and fix the issue. Things you’re going to need:</p>
<ul>
<li>A tool that can create Mini-Dumps. I highly recommend <!-- raw HTML omitted -->Process Explorer<!-- raw HTML omitted --> which is available via TechNet.</li>
<li><!-- raw HTML omitted -->WinDBG, via Debugging Tools for Windows<!-- raw HTML omitted -->, an unintuitive yet key tool from Microsoft for debugging Mini-Dump files. When you install this, you’ll have to do it through the Windows Software Development Kit installer. You can unselect everything except Debugging Tools for Windows, since you’ll need nothing else for our purposes. <!-- raw HTML omitted --></li>
</ul>
<p>Install WinDBG on the PC which you’ll use to analyze the Mini-Dump (typically your Development machine). Install Process Explorer on the Production box that hosts the application which is misbehaving.</p>
<p><strong>Now that you’ve got those installed, we’ll proceed and figure out the problem.</strong></p>
<p>So our scenario is this: we have an application running in Production which is spinning out of control, we have the source code on a different PC, and we can’t attach a debugger to the Production environment. We can’t reproduce this behaviour in Development or QA environments at all. So, time to get down to the details of the problem.</p>
<p>Step 1 is easy. You need to take a Mini-Dump of the misbehaving application on the Production machine. There’s a bit of a catch 22 here in that the rogue application is using 100% of your CPU, so this Mini-Dump could take forever. To solve that problem on a multi-core machine, simply use Task Manager to set the affinity of the misbehaving application to 1 or 2 cores to lower the total CPU used by the application, thus freeing up CPU for our Mini-Dump:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-2.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-2.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-2.png" itemprop="contentUrl"></a>
      <figcaption><h4>Set the Affinity to 1 or 2 CPUs</h4>
      </figcaption>
  </figure>
</div>

<p>Unselect “All Processors” and pick 1 or 2:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-3.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-3.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-3.png" itemprop="contentUrl"></a>
      <figcaption><h4>Pick 1 or 2 CPUs</h4>
      </figcaption>
  </figure>
</div>

<p>There, now it’s a lot easier to do things on the affected PC since it isn’t spending 100% of its CPU spinning on your application:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-4.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-4.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-4.png" itemprop="contentUrl"></a>
      <figcaption><h4>Processor Now Freed Up</h4>
      </figcaption>
  </figure>
</div>

<p>Note that the affinity setting does not persist, meaning the next time you launch the application, it will go back to using all CPUs per usual.</p>
<p>So, now we’re on to Step 2. Take a Mini-Dump (haha). To do this, launch Process Explorer, find your rogue application, right click, Create Dump –&gt; Minidump:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-5.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-5.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-5.png" itemprop="contentUrl"></a>
      <figcaption><h4>Create a Minidump</h4>
      </figcaption>
  </figure>
</div>

<p>Now save the .dmp file somewhere that your Development PC can get to it in order to debug the issue.</p>
<p>Step 3. Great, so now we have our .dmp Mini-Dump file… so let’s get cracking on debugging it. Get the .dmp file to your Development PC and fire up WinDBG. <strong>NOTE: run the 64 bit version for 64 bit applications and the 32 bit version for 32 bit applications. If you experience weird behaviour, try switching the WinDBG version that you launch.</strong> You’ll be greeted with a pretty bland grey window. Go to File –&gt; Open Crash Dump (or CTRL + D for the shortcut fans out there). Select your .dmp file and you’ll end up with a screen similar to this:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-6.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-6.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-6.png" itemprop="contentUrl"></a>
      <figcaption><h4>Minidump File Loaded</h4>
      </figcaption>
  </figure>
</div>

<p>So now the “hard” part begins. We need to manually diagnose the issue. The first step in WinDBG is usually to load up the CLR runtime so that we can examine our stack. To do this, run either:</p>
<pre><code>.loadby SOS clr            // for .NET 4+
</code></pre>
<p><strong>OR</strong></p>
<pre><code>.loadby SOS mscorwks       // for .NET 3.5 or lower
</code></pre>
<p>My app is .NET 4, so I ran .loadby sos clr to load the CLR. This is what it should look like if it succeeds:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-10.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-10.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-10.png" itemprop="contentUrl"></a>
      <figcaption><h4>Load the CLR</h4>
      </figcaption>
  </figure>
</div>

<p>Next we need to load the symbols for the application that we’re debugging. To do this, run the following commands:</p>
<pre><code>.symfix
.sympath+ **&lt;absolute path to your application's compiled code and symbols&gt;**
</code></pre>
<p>Here’s what I did for my Symbol Path for reference:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-7.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-7.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-7.png" itemprop="contentUrl"></a>
      <figcaption><h4>Run .symfix and .sympath</h4>
      </figcaption>
  </figure>
</div>

<p>Next, run .symopt+0x40 to enable symbols to be used which are not perfectly matched. This setting is extremely useful in cases where the code is compiled locally and doesn’t perfectly match the production code that the Mini-Dump was taken from. If this setting is omitted, you will have a very bad time determining the issue, so make sure that you run it. This is what it looks like:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-8.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-8.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-8.png" itemprop="contentUrl"></a>
      <figcaption><h4>Run symopt&#43;0x40</h4>
      </figcaption>
  </figure>
</div>

<p>Now that you’ve specified the path at which to look for symbols for your application, run the reload command to reload your symbols:</p>
<pre><code>.reload /v /f
</code></pre>
<p>You might get some warnings and errors here but that’s usually fine as long as they don’t relate to your application’s DLLs. Verify that it found your application’s symbols by reading the output of the .reload command:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-9.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-9.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-9.png" itemprop="contentUrl"></a>
      <figcaption><h4>Ensure your symbols loaded</h4>
      </figcaption>
  </figure>
</div>

<p>Alright, almost there! Now we have our symbols and CLR loaded, so let’s find out what our application is spending all of its time doing. Run the command:</p>
<pre><code>!runaway
</code></pre>
<p>And you’ll find out which threads have been using the most CPU time. Mine looks like this:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-11.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-11.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-11.png" itemprop="contentUrl"></a>
      <figcaption><h4>Many Threads are Long Running</h4>
      </figcaption>
  </figure>
</div>

<p>So here we can see that we have 6 threads which are taking up more time than all of the others… We need to print their stack traces and see just what is going on. Execute this (super intuitive) command to see the stack trace of the first thread:</p>
<pre><code>~~[9:18a8]e!clrstack
</code></pre>
<p>Super intuitive right? Basically it says “gimme the CLR stack trace for the thread whose ID is in the square brackets”. Here’s what mine spits out:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-12.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-12.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-12.png" itemprop="contentUrl"></a>
      <figcaption><h4>AHA! The culprit!</h4>
      </figcaption>
  </figure>
</div>

<p>And now we know the culprit! So, we proceed to our source code and sure enough, line 16 is our problem:</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/but-it-didnt-happen-in-dev-or-qa-13.png" alt="/img/but-it-didnt-happen-in-dev-or-qa-13.png"/>
    </div>
    <a href="/img/but-it-didnt-happen-in-dev-or-qa-13.png" itemprop="contentUrl"></a>
      <figcaption><h4>The Problem Line</h4>
      </figcaption>
  </figure>
</div>

<p>And there you have it. How to debug production issues from your development environment.</p>
<p>Note that you can also determine what caused a crash using WinDBG… Have your system administrator enable Mini-Dumps for crashes, and then perform the same commands as we did in this post EXCEPT that at the part where we ran !runaway, instead run !analyze -v and !clrstack – these will get you on your way!</p>


        
          <div class="blog-tags">
            
              <a href="https://www.davidhaney.io/tags/dotnet/">dotnet</a>&nbsp;
            
              <a href="https://www.davidhaney.io/tags/debugging/">debugging</a>&nbsp;
            
              <a href="https://www.davidhaney.io/tags/performance/">performance</a>&nbsp;
            
              <a href="https://www.davidhaney.io/tags/profiling/">profiling</a>&nbsp;
            
              <a href="https://www.davidhaney.io/tags/programming/">programming</a>&nbsp;
            
              <a href="https://www.davidhaney.io/tags/windbg/">windbg</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fwww.davidhaney.io%2fbut-it-didnt-happen-in-dev-or-qa%2f&amp;text=But%20it%20Didn%27t%20Happen%20in%20DEV%20or%20QA%21&amp;via=haneytron" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.davidhaney.io%2fbut-it-didnt-happen-in-dev-or-qa%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fwww.davidhaney.io%2fbut-it-didnt-happen-in-dev-or-qa%2f&amp;title=But%20it%20Didn%27t%20Happen%20in%20DEV%20or%20QA%21" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.davidhaney.io%2fbut-it-didnt-happen-in-dev-or-qa%2f&amp;title=But%20it%20Didn%27t%20Happen%20in%20DEV%20or%20QA%21" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fwww.davidhaney.io%2fbut-it-didnt-happen-in-dev-or-qa%2f&amp;title=But%20it%20Didn%27t%20Happen%20in%20DEV%20or%20QA%21" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.davidhaney.io%2fbut-it-didnt-happen-in-dev-or-qa%2f&amp;description=But%20it%20Didn%27t%20Happen%20in%20DEV%20or%20QA%21" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
            
          

          
                  <h4 class="see-also">See also</h4>
                  <ul>
                
                
                    <li><a href="/net-core-mvc-access-appsettings-json/">.NET Core MVC - How to Access appsettings.json</a></li>
                
                    <li><a href="/net-core-azure-functions-tutorial/">.NET Core Azure Functions Tutorial</a></li>
                
                    <li><a href="/custom-asp-net-mvc-action-result-cache-attribute/">Custom ASP.NET MVC Action Result Cache Attribute</a></li>
                
                    <li><a href="/npm-left-pad-have-we-forgotten-how-to-program/">NPM &amp; left-pad: Have We Forgotten How To Program?</a></li>
                
                    <li><a href="/to-node-js-or-not-to-node-js/">To Node.js Or Not To Node.js</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://www.davidhaney.io/visual-studio-2012-intellisense-not-working-solved/" data-toggle="tooltip" data-placement="top" title="Visual Studio 2012 Intellisense Not Working - SOLVED">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://www.davidhaney.io/published-by-red-gate/" data-toggle="tooltip" data-placement="top" title="Published by Red Gate">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "haney" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
          
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/haneytron" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/haneytron" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/davidahaney" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/2420979/haney" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="/index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
		<br/>
        <p class="credits copyright text-muted">
          
            
              <a href="https://www.davidhaney.io">David Haney</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.101.0</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://www.davidhaney.io/js/main.js"></script>
<script src="https://www.davidhaney.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://www.davidhaney.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

